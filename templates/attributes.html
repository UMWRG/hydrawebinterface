<form id="save-resource-attributes" action="#">
<input type="hidden" name="resource_id" value="{{resource_id}}"></input>
<input type="hidden" name="scenario_id" value="{{scenario_id}}"></input>
<input type="hidden" name="res_type" value="{{resource_type}}"></input>
<div class="menubar btn-group" role="group" aria-label="...">
{{resource.name}}
<button type="button" class="btn btn-xs btn-danger close-resource-data pull-right">
    <span class="glyphicon glyphicon-remove"></span>
</button>
</div>

<table type="table" class="table">
    {%for rs in resource_scenarios%}
            {%if rs.data_type%}
                {%set data_type = rs.data_type%}
            {%elif rs.dataset%}
                {%set data_type = rs.dataset.data_type%}
            {%else%}    
                {%set data_type = None%}
            {%endif%}
        <tr>
            <td>{{attr_id_name_map[rs.attr_id]}}</td>
            <td>
                <input type="hidden" name="attr_id" value="{{rs.attr_id}}"></input>
                <input type="hidden" name="rs_id" value="{{rs.rs_id}}"></input>
                <input type="hidden" name="ra_id" value="{{rs.ra_id}}"></input>
                {%if data_type == "descriptor"%}
                    <input type="hidden" name="data_type" value="descriptor"></input>
                    <input type="text" name="value" value="{{rs.dataset.value}}"></input>
                {%elif data_type == "scalar"%}

                    <input type="hidden" name="data_type" value="scaler"></input>
                    <input type="number" name="value" value="{{rs.dataset.value}}"></input>
                {%elif data_type == "array"%}

                    <input type="hidden" name="data_type" value="array"></input>
                    <input type="hidden" name="value" value="rs.dataset.value"></input>
                    <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#array_modal">
                        <span class="glyphicon glyphicon-time"></span> 
                    </button>
                {%elif data_type == "timeseries"%}

                    <input type="hidden" name="data_type" value="timeseries"></input>
                    <input type="hidden" name="value" value="rs.dataset.value"></input>
                    <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#ts_modal">
                        <span class="glyphicon glyphicon-time"></span>  
                    </button>
                {%else%}
                    <input type="hidden" name="data_type" value="scalar"></input>
                    <input type="number" name="value" value="{{rs.dataset.value}}"></input>
                {%endif%}
            </td>
        </tr>
    {%endfor%}
</table>
</form>

<div class="btn-group" role="group" aria-label="...">
<button type="button" class="btn btn-danger close-resource-data">Close</button>
</div>
<div class="btn-group pull-right" role="group" aria-label="...">
<button type="button" class="btn btn-success save-resource-data">Save</button>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="ts_modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Edit Timeseries</h4>
      </div>
      <div class="modal-body">
        <div id="timeseries_g" class="timeseries_gr">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button>-->
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="array_modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Edit Array</h4>
      </div>
      <div class="modal-body">
        <div id="timeseries_g" class="timeseries_gr">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button>-->
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
